{"filter":false,"title":"booklist.php","tooltip":"/images_kitchen/php-mysql/booklist.php","undoManager":{"mark":55,"position":55,"stack":[[{"start":{"row":0,"column":0},"end":{"row":36,"column":7},"action":"insert","lines":["<!DOCTYPE html>","<html lang=\"ja\">","    <head>","        <meta charset=\"utf-8\">","        <title>Booklist</title>","        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, shrink-to-fit=no\">","        <link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css\" integrity=\"sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO\" crossorigin=\"anonymous\">","    </head>","    <body class=\"mt-4\">","        <div class=\"container\">","            <h1><a href=\"booklist.php\">Booklist</a></h1>","","            <h2>書籍の登録フォーム</h2>","            <form action=\"booklist.php\" method=\"POST\" class=\"form-inline mb-2\">","                <div class=\"form-group mr-2\">","                    <input type=\"text\" name=\"book_title\" class=\"form-control\" placeholder=\"書籍タイトルを入力\" required>","                </div>","                <button type=\"submit\" name=\"submit_add_book\" class=\"btn btn-primary\">登録</button>","            </form>","","            <hr />","","            <h2>登録された書籍一覧</h2>","            <ul>","                <li>はじめてのWebアプリケーション</li>","                <li>かんたん！PHPプログラミング</li>","                <li>PHP+MySQLで作るWebアプリケーション</li>","            </ul>","        </div>","","        <!-- BootstrapなどのJavaScript -->","        <script src=\"https://code.jquery.com/jquery-3.3.1.slim.min.js\" integrity=\"sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo\" crossorigin=\"anonymous\"></script>","        <script src=\"https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js\" integrity=\"sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49\" crossorigin=\"anonymous\"></script>","        <script src=\"https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js\" integrity=\"sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy\" crossorigin=\"anonymous\"></script>","        <script defer src=\"https://use.fontawesome.com/releases/v5.2.0/js/all.js\" integrity=\"sha384-4oV5EgaV02iISL2ban6c/RmotsABqE4yZxZLcYMAdG7FAPsyHYAPpywE9PJo+Khy\" crossorigin=\"anonymous\"></script>","    </body>","</html>"],"id":1}],[{"start":{"row":26,"column":48},"end":{"row":27,"column":0},"action":"insert","lines":["",""],"id":2},{"start":{"row":27,"column":0},"end":{"row":27,"column":16},"action":"insert","lines":["                "]},{"start":{"row":27,"column":16},"end":{"row":27,"column":17},"action":"insert","lines":["<"]},{"start":{"row":27,"column":17},"end":{"row":27,"column":18},"action":"insert","lines":[">"]}],[{"start":{"row":27,"column":17},"end":{"row":27,"column":18},"action":"insert","lines":["?"],"id":3},{"start":{"row":27,"column":18},"end":{"row":27,"column":19},"action":"insert","lines":["p"]},{"start":{"row":27,"column":19},"end":{"row":27,"column":20},"action":"insert","lines":["h"]},{"start":{"row":27,"column":20},"end":{"row":27,"column":21},"action":"insert","lines":["p"]}],[{"start":{"row":27,"column":16},"end":{"row":27,"column":17},"action":"remove","lines":["<"],"id":4}],[{"start":{"row":27,"column":16},"end":{"row":27,"column":17},"action":"insert","lines":["<"],"id":5}],[{"start":{"row":27,"column":21},"end":{"row":27,"column":22},"action":"remove","lines":[">"],"id":6},{"start":{"row":27,"column":20},"end":{"row":27,"column":21},"action":"remove","lines":["p"]}],[{"start":{"row":27,"column":19},"end":{"row":27,"column":20},"action":"remove","lines":["h"],"id":7},{"start":{"row":27,"column":18},"end":{"row":27,"column":19},"action":"remove","lines":["p"]},{"start":{"row":27,"column":17},"end":{"row":27,"column":18},"action":"remove","lines":["?"]},{"start":{"row":27,"column":16},"end":{"row":27,"column":17},"action":"remove","lines":["<"]},{"start":{"row":27,"column":12},"end":{"row":27,"column":16},"action":"remove","lines":["    "]},{"start":{"row":27,"column":8},"end":{"row":27,"column":12},"action":"remove","lines":["    "]}],[{"start":{"row":27,"column":4},"end":{"row":27,"column":8},"action":"remove","lines":["    "],"id":8},{"start":{"row":27,"column":0},"end":{"row":27,"column":4},"action":"remove","lines":["    "]},{"start":{"row":26,"column":48},"end":{"row":27,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":26,"column":48},"end":{"row":27,"column":0},"action":"insert","lines":["",""],"id":9},{"start":{"row":27,"column":0},"end":{"row":27,"column":16},"action":"insert","lines":["                "]},{"start":{"row":27,"column":16},"end":{"row":27,"column":17},"action":"insert","lines":[","]}],[{"start":{"row":27,"column":17},"end":{"row":27,"column":18},"action":"insert","lines":["."],"id":10}],[{"start":{"row":27,"column":17},"end":{"row":27,"column":18},"action":"remove","lines":["."],"id":11},{"start":{"row":27,"column":16},"end":{"row":27,"column":17},"action":"remove","lines":[","]}],[{"start":{"row":27,"column":16},"end":{"row":27,"column":17},"action":"insert","lines":["<"],"id":12}],[{"start":{"row":27,"column":17},"end":{"row":27,"column":18},"action":"insert","lines":["?"],"id":13},{"start":{"row":27,"column":18},"end":{"row":27,"column":19},"action":"insert","lines":["p"]}],[{"start":{"row":27,"column":19},"end":{"row":27,"column":20},"action":"insert","lines":["h"],"id":14},{"start":{"row":27,"column":20},"end":{"row":27,"column":21},"action":"insert","lines":["p"]},{"start":{"row":27,"column":21},"end":{"row":27,"column":22},"action":"insert","lines":[">"]}],[{"start":{"row":27,"column":22},"end":{"row":27,"column":23},"action":"insert","lines":["<"],"id":15},{"start":{"row":27,"column":23},"end":{"row":27,"column":24},"action":"insert","lines":[">"]}],[{"start":{"row":27,"column":23},"end":{"row":27,"column":24},"action":"insert","lines":["p"],"id":16}],[{"start":{"row":27,"column":23},"end":{"row":27,"column":24},"action":"remove","lines":["p"],"id":17}],[{"start":{"row":27,"column":23},"end":{"row":27,"column":24},"action":"insert","lines":["?"],"id":18}],[{"start":{"row":27,"column":22},"end":{"row":27,"column":23},"action":"remove","lines":["<"],"id":19},{"start":{"row":27,"column":21},"end":{"row":27,"column":22},"action":"remove","lines":[">"]}],[{"start":{"row":27,"column":21},"end":{"row":27,"column":22},"action":"insert","lines":[" "],"id":20}],[{"start":{"row":27,"column":16},"end":{"row":27,"column":17},"action":"remove","lines":["<"],"id":21}],[{"start":{"row":27,"column":16},"end":{"row":27,"column":17},"action":"insert","lines":["<"],"id":22}],[{"start":{"row":27,"column":15},"end":{"row":27,"column":24},"action":"remove","lines":[" <?php ?>"],"id":23},{"start":{"row":27,"column":14},"end":{"row":27,"column":15},"action":"remove","lines":[" "]},{"start":{"row":27,"column":13},"end":{"row":27,"column":14},"action":"remove","lines":[" "]},{"start":{"row":27,"column":12},"end":{"row":27,"column":13},"action":"remove","lines":[" "]},{"start":{"row":27,"column":8},"end":{"row":27,"column":12},"action":"remove","lines":["    "]},{"start":{"row":27,"column":4},"end":{"row":27,"column":8},"action":"remove","lines":["    "]},{"start":{"row":27,"column":0},"end":{"row":27,"column":4},"action":"remove","lines":["    "]},{"start":{"row":26,"column":48},"end":{"row":27,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":26,"column":48},"end":{"row":27,"column":0},"action":"insert","lines":["",""],"id":24},{"start":{"row":27,"column":0},"end":{"row":27,"column":16},"action":"insert","lines":["                "]}],[{"start":{"row":27,"column":16},"end":{"row":29,"column":34},"action":"insert","lines":["<?php // 登録された書籍タイトルの数だけループ 開始 ?>","                    <li><?php // print 書籍タイトル; ?></li>","                <?php // ループ 終了 ?>"],"id":25}],[{"start":{"row":8,"column":23},"end":{"row":9,"column":8},"action":"insert","lines":["","        "],"id":26}],[{"start":{"row":9,"column":8},"end":{"row":15,"column":2},"action":"insert","lines":["<?php","    // フォームデータ送受信確認用コード（本番では削除）","    print '<div style=\"background-color: skyblue;\">';","    print '<p>動作確認用:</p>';","    print_r($_POST);","    print '</div>';","?>"],"id":27}],[{"start":{"row":9,"column":6},"end":{"row":9,"column":7},"action":"remove","lines":[" "],"id":28},{"start":{"row":9,"column":5},"end":{"row":9,"column":6},"action":"remove","lines":[" "]},{"start":{"row":9,"column":4},"end":{"row":9,"column":5},"action":"remove","lines":[" "]},{"start":{"row":9,"column":0},"end":{"row":9,"column":4},"action":"remove","lines":["    "]}],[{"start":{"row":13,"column":12},"end":{"row":13,"column":18},"action":"remove","lines":["$_POST"],"id":31}],[{"start":{"row":13,"column":12},"end":{"row":13,"column":14},"action":"insert","lines":["まあ"],"id":32}],[{"start":{"row":13,"column":13},"end":{"row":13,"column":14},"action":"remove","lines":["あ"],"id":33},{"start":{"row":13,"column":12},"end":{"row":13,"column":13},"action":"remove","lines":["ま"]}],[{"start":{"row":13,"column":12},"end":{"row":13,"column":18},"action":"insert","lines":["$_POST"],"id":34}],[{"start":{"row":13,"column":17},"end":{"row":13,"column":18},"action":"remove","lines":["T"],"id":35},{"start":{"row":13,"column":16},"end":{"row":13,"column":17},"action":"remove","lines":["S"]},{"start":{"row":13,"column":15},"end":{"row":13,"column":16},"action":"remove","lines":["O"]},{"start":{"row":13,"column":14},"end":{"row":13,"column":15},"action":"remove","lines":["P"]}],[{"start":{"row":13,"column":14},"end":{"row":13,"column":16},"action":"insert","lines":["やあ"],"id":36}],[{"start":{"row":13,"column":15},"end":{"row":13,"column":16},"action":"remove","lines":["あ"],"id":37},{"start":{"row":13,"column":14},"end":{"row":13,"column":15},"action":"remove","lines":["や"]},{"start":{"row":13,"column":13},"end":{"row":13,"column":14},"action":"remove","lines":["_"]},{"start":{"row":13,"column":12},"end":{"row":13,"column":13},"action":"remove","lines":["$"]}],[{"start":{"row":13,"column":12},"end":{"row":13,"column":18},"action":"insert","lines":["$_POST"],"id":38}],[{"start":{"row":12,"column":26},"end":{"row":13,"column":0},"action":"insert","lines":["",""],"id":39},{"start":{"row":13,"column":0},"end":{"row":13,"column":4},"action":"insert","lines":["    "]},{"start":{"row":13,"column":4},"end":{"row":13,"column":5},"action":"insert","lines":["$"]}],[{"start":{"row":13,"column":5},"end":{"row":13,"column":6},"action":"insert","lines":["/"],"id":40}],[{"start":{"row":13,"column":5},"end":{"row":13,"column":6},"action":"remove","lines":["/"],"id":41}],[{"start":{"row":13,"column":5},"end":{"row":13,"column":6},"action":"insert","lines":["_"],"id":42}],[{"start":{"row":13,"column":4},"end":{"row":13,"column":6},"action":"remove","lines":["$_"],"id":43},{"start":{"row":13,"column":4},"end":{"row":13,"column":10},"action":"insert","lines":["$_POST"]}],[{"start":{"row":13,"column":10},"end":{"row":13,"column":11},"action":"insert","lines":["="],"id":44},{"start":{"row":13,"column":11},"end":{"row":13,"column":12},"action":"insert","lines":["b"]},{"start":{"row":13,"column":12},"end":{"row":13,"column":13},"action":"insert","lines":["i"]}],[{"start":{"row":13,"column":13},"end":{"row":13,"column":14},"action":"insert","lines":["b"],"id":45},{"start":{"row":13,"column":14},"end":{"row":13,"column":15},"action":"insert","lines":["i"]},{"start":{"row":13,"column":15},"end":{"row":13,"column":16},"action":"insert","lines":["d"]},{"start":{"row":13,"column":16},"end":{"row":13,"column":17},"action":"insert","lines":["e"]}],[{"start":{"row":13,"column":17},"end":{"row":13,"column":18},"action":"insert","lines":[";"],"id":46}],[{"start":{"row":13,"column":11},"end":{"row":13,"column":12},"action":"insert","lines":[" "],"id":47}],[{"start":{"row":13,"column":18},"end":{"row":13,"column":19},"action":"remove","lines":[";"],"id":48},{"start":{"row":13,"column":17},"end":{"row":13,"column":18},"action":"remove","lines":["e"]},{"start":{"row":13,"column":16},"end":{"row":13,"column":17},"action":"remove","lines":["d"]},{"start":{"row":13,"column":15},"end":{"row":13,"column":16},"action":"remove","lines":["i"]},{"start":{"row":13,"column":14},"end":{"row":13,"column":15},"action":"remove","lines":["b"]}],[{"start":{"row":13,"column":13},"end":{"row":13,"column":14},"action":"remove","lines":["i"],"id":49},{"start":{"row":13,"column":12},"end":{"row":13,"column":13},"action":"remove","lines":["b"]},{"start":{"row":13,"column":11},"end":{"row":13,"column":12},"action":"remove","lines":[" "]},{"start":{"row":13,"column":10},"end":{"row":13,"column":11},"action":"remove","lines":["="]},{"start":{"row":13,"column":9},"end":{"row":13,"column":10},"action":"remove","lines":["T"]},{"start":{"row":13,"column":8},"end":{"row":13,"column":9},"action":"remove","lines":["S"]},{"start":{"row":13,"column":7},"end":{"row":13,"column":8},"action":"remove","lines":["O"]},{"start":{"row":13,"column":6},"end":{"row":13,"column":7},"action":"remove","lines":["P"]},{"start":{"row":13,"column":5},"end":{"row":13,"column":6},"action":"remove","lines":["_"]},{"start":{"row":13,"column":4},"end":{"row":13,"column":5},"action":"remove","lines":["$"]},{"start":{"row":13,"column":0},"end":{"row":13,"column":4},"action":"remove","lines":["    "]}],[{"start":{"row":12,"column":26},"end":{"row":13,"column":0},"action":"remove","lines":["",""],"id":50}],[{"start":{"row":0,"column":0},"end":{"row":1,"column":0},"action":"insert","lines":["",""],"id":51}],[{"start":{"row":0,"column":0},"end":{"row":12,"column":2},"action":"insert","lines":["<?php","    // MySQLサーバ接続に必要な値を変数に代入","    $username = 'dbuser';","    $password = 'dbpass';","","    // PDO のインスタンスを生成して、MySQLサーバに接続","    $database = new PDO('mysql:host=localhost;dbname=booklist;charset=UTF8;', $username, $password);","","    // ここにMySQLを使ったなんらかの処理を書く","","    // MySQLを使った処理が終わると、接続は不要なので切断する","    $database = null;","?>"],"id":52}],[{"start":{"row":8,"column":0},"end":{"row":8,"column":29},"action":"remove","lines":["    // ここにMySQLを使ったなんらかの処理を書く"],"id":53}],[{"start":{"row":8,"column":0},"end":{"row":16,"column":22},"action":"insert","lines":["// 実行するSQLを作成","    $sql = 'SELECT * FROM books ORDER BY created_at DESC';","    // SQLを実行する","    $statement = $database->query($sql);","    // 結果レコード（ステートメントオブジェクト）を配列に変換する","    $records = $statement->fetchAll();","","    // ステートメントを破棄する","    $statement = null;"],"id":54}],[{"start":{"row":8,"column":0},"end":{"row":8,"column":4},"action":"insert","lines":["    "],"id":55}],[{"start":{"row":52,"column":2},"end":{"row":57,"column":34},"action":"remove","lines":["              <li>はじめてのWebアプリケーション</li>","                <li>かんたん！PHPプログラミング</li>","                <li>PHP+MySQLで作るWebアプリケーション</li>","                <?php // 登録された書籍タイトルの数だけループ 開始 ?>","                    <li><?php // print 書籍タイトル; ?></li>","                <?php // ループ 終了 ?>"],"id":56},{"start":{"row":52,"column":2},"end":{"row":61,"column":2},"action":"insert","lines":["<?php","    if ($records) {","        foreach ($records as $record) {","            $book_title = $record['book_title'];","?>","                    <li><?php print htmlspecialchars($book_title, ENT_QUOTES, \"UTF-8\"); ?></li>","<?php","        }","    }","?>"]}],[{"start":{"row":7,"column":0},"end":{"row":8,"column":0},"action":"insert","lines":["",""],"id":57},{"start":{"row":8,"column":0},"end":{"row":9,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":8,"column":0},"end":{"row":20,"column":5},"action":"insert","lines":["// フォームから書籍タイトルが送信されていればデータベースに保存する","    if (array_key_exists('book_title', $_POST)) {","        // 実行するSQLを作成","        $sql = 'INSERT INTO books (book_title) VALUES(:book_title)';","        // ユーザ入力に依存するSQLを実行するので、セキュリティ対策をする","        $statement = $database->prepare($sql);","        // ユーザ入力データ($_POST['book_title'])をVALUES(?)の?の部分に代入する","        $statement->bindParam(':book_title', $_POST['book_title']);","        // SQL文を実行する","        $statement->execute();","        // ステートメントを破棄する","        $statement = null;","    }"],"id":58}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":7,"column":0},"end":{"row":7,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1592138894074,"hash":"315e72aef5ee14a2ed03632cc3382dd30a5285f2"}